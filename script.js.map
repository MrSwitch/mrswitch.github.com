{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/script.js","../tricks/array/toArray.js","../tricks/browser/http/getScript.js","../tricks/dom/attr.js","../tricks/dom/createElement.js","../tricks/dom/each.js","../tricks/dom/isDom.js","../tricks/events/createEvent.js","../tricks/object/instanceOf.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","hashchange","controls","window","location","hash","document","documentElement","classList","bg","config","getScript","name","Math","floor","random","self","background","push","BG","init","setup","addEventListener","createElement","href","id","innerHTML","onclick","stopPropagation","body","appendChild","event","preventDefault","obj","Array","prototype","slice","createEvent","url","callback","timeout","arguments","undefined","bool","timer","head","getElementsByTagName","parentNode","cb","clearTimeout","setTimeout","script","src","onerror","onload","onreadystatechange","test","readyState","async","insertBefore","firstChild","each","elements","props","element","x","prop","setAttribute","attr","tagName","attrs","elm","isDom","instanceOf","toArray","matches","querySelectorAll","forEach","_HTMLElement","HTMLElement","Element","_HTMLDocument","HTMLDocument","Document","_Window","constructor","dict","bubbles","cancelable","eventname","options","Event","initEvent","root"],"mappings":"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","file":"script.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Script\n// This script controls the background page\nconst getScript = require('tricks/browser/http/getScript');\n\nconst name = (function() {\n\tconst a = ['mineField', 'tiledOfLife', 'colorFlood', 'tetris'];\n\treturn a[Math.floor(Math.random() * a.length)] || a[0];\n})();\n\ngetScript(`/background/dist/${name}.js`);\n\n// Install background\nself.background = self.background || [];\n\nlet bg;\n\n// Push a function to call\nself.background.push(BG => {\n\t// Passing in null for target inserts it into the body background\n\tbg = BG.init(null);\n\n\t// Setup, without any controls\n\tif (bg.setup) {\n\n\t\t// Set default state\n\t\tbg.setup({\n\t\t\tcontrols: false\n\t\t});\n\t}\n\n\t// Is this a configurable background?\n\tif (bg.config) {\n\n\t\t// Create a controller to listen to toggling between states\n\t\twindow.addEventListener('hashchange', hashchange);\n\t\thashchange();\n\n\t\t// Show the controls\n\t\tconst a = document.createElement('a');\n\t\ta.href = '#background';\n\t\ta.id = 'play_btn'; // jerky jank prevention\n\t\ta.innerHTML = 'Play';\n\t\ta.onclick = function(e) {\n\t\t\te.stopPropagation();\n\t\t};\n\t\tdocument.body.appendChild(a);\n\t}\n});\n\n\n// Listen to the background trigger to show/hide the background\nfunction hashchange() {\n\n\t// Has the backdrop come into the focus?\n\tconst controls = (window.location.hash === '#background');\n\n\t// Add/Remove class from window\n\twindow.document.documentElement.classList[controls ? 'add' : 'remove']('background');\n\n\tbg.config({controls});\n}\n\n// Fix ios scrolling issue\ndocument.addEventListener('touchmove', event => {\n\tevent.preventDefault();\n}, false);\n\n","module.exports = obj => Array.prototype.slice.call(obj);\n","const createElement = require('../../dom/createElement.js');\nconst createEvent = require('../../events/createEvent.js');\n\nmodule.exports = (url, callback, timeout = 0) => {\n\n\t// Inject a script tag\n\tlet bool = 0;\n\tlet timer;\n\tconst head = document.getElementsByTagName('script')[0].parentNode;\n\tconst cb = e => {\n\t\tif (!(bool++) && callback) {\n\t\t\tcallback(e);\n\t\t}\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t}\n\t};\n\n\t// Add timeout\n\tif (timeout) {\n\t\ttimer = window.setTimeout(() => {\n\t\t\tcb(createEvent('timeout'));\n\t\t}, timeout);\n\t}\n\n\t// Build script tag\n\tconst script = createElement('script', {\n\t\tsrc: url,\n\t\tonerror: cb,\n\t\tonload: cb,\n\t\tonreadystatechange: () => {\n\t\t\tif (/loaded|complete/i.test(script.readyState)) {\n\t\t\t\tcb(createEvent('load'));\n\t\t\t}\n\t\t}\n\t});\n\n\t// Set Async\n\tscript.async = true;\n\n\t// Inject script tag into the head element\n\thead.insertBefore(script, head.firstChild);\n\n\treturn script;\n};\n","const each = require('./each.js');\n\nmodule.exports = (elements, props) =>\n\teach(elements, element => {\n\t\tfor (const x in props) {\n\t\t\tconst prop = props[x];\n\t\t\tif (typeof prop === 'function') {\n\t\t\t\telement[x] = prop;\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.setAttribute(x, prop);\n\t\t\t}\n\t\t}\n\t});\n","const attr = require('./attr.js');\n\nmodule.exports = (tagName, attrs) => {\n\tconst elm = document.createElement(tagName);\n\tattr(elm, attrs);\n\treturn elm;\n};\n","const isDom = require('./isDom.js');\nconst instanceOf = require('../object/instanceOf.js');\nconst toArray = require('../array/toArray.js');\n\nmodule.exports = (matches, callback = () => {}) => {\n\n\tif (isDom(matches)) {\n\t\tmatches = [matches];\n\t}\n\telse if (typeof(matches) === 'string') {\n\t\tmatches = document.querySelectorAll(matches);\n\t}\n\n\tif (!instanceOf(matches, Array)) {\n\t\tmatches = toArray(matches);\n\t}\n\n\tif (callback) {\n\t\tmatches.forEach(callback);\n\t}\n\n\treturn matches;\n};\n","const instanceOf = require('../object/instanceOf.js');\n\nconst _HTMLElement = (typeof HTMLElement !== 'undefined' && HTMLElement) || (typeof Element !== 'undefined' && Element);\nconst _HTMLDocument = (typeof HTMLDocument !== 'undefined' && HTMLDocument) || (typeof Document !== 'undefined' && Document);\nconst _Window = window.constructor;\n\nmodule.exports = test =>\n\tinstanceOf(test, _HTMLElement) ||\n\t\tinstanceOf(test, _HTMLDocument) ||\n\t\tinstanceOf(test, _Window)\n;\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nconst dict = {bubbles: true, cancelable: true};\n\nlet createEvent = (eventname, options = dict) =>\n\tnew Event(eventname, options);\n\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname, options = dict) => {\n\t\tconst e = document.createEvent('Event');\n\t\te.initEvent(eventname, !!options.bubbles, !!options.cancelable);\n\t\treturn e;\n\t};\n}\n\nmodule.exports = createEvent;\n","module.exports = (test, root) => root && test instanceof root;\n"]}